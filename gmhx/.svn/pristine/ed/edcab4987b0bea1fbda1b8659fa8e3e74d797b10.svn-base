<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.gome.gmhx.dao.basicdata.BrandDao">
	<resultMap id="BaseResultMap" type="com.gome.gmhx.entity.Brand">
	    <result property="id" column="id" jdbcType="INTEGER"/>
		<result property="gm_code" column="gm_code" jdbcType="VARCHAR"/>
		<result property="brand" column="brand" jdbcType="VARCHAR"/>
		<result property="note" column="note" jdbcType="VARCHAR"/>
		<result property="rep_date" column="rep_date" jdbcType="TIMESTAMP"/>
		<result property="creater" column="creater" jdbcType="VARCHAR"/>
		<result property="modifier" column="modifier" jdbcType="VARCHAR"/>
		<result property="mod_date" column="mod_date" jdbcType="TIMESTAMP"/>
</resultMap>
  
  
 <select id="getBrandPageList" parameterType="com.gome.common.page.Page" resultType="hashmap">
           select t.id, t.note , t.mod_date , t.gm_code, t.brand, v1.code_value gm_code2, v2.code_value brand2
			from hx_brand_information t
			LEFT JOIN v_code v1
			on v1.code_id='gmdm' and v1.code_key=t.gm_code
			LEFT JOIN v_code v2
			on v2.code_id='pp' and v2.code_key=t.brand
			where gm_code in('01','02','03','04','05','06','07','08','09') 	
		<if test="param.gm_code != null">
		   and gm_code like CONCAT('%',#{param.gm_code},'%')
		</if>
		<if test="param.brand != null">
		   and brand like CONCAT('%',#{param.brand},'%')
		</if>
	<if test="param.mod_date_st !=null and param.mod_date_st != '' ">
		   <![CDATA[ and mod_date >=#{param.mod_date_st} ]]>   </if>      
	<if test="param.mod_date_end !=null and param.mod_date_end != '' ">
		   <![CDATA[ and mod_date <=#{param.mod_date_end} ]]>   </if>    
  </select>
  
  <select id="getBrandById" resultMap="BaseResultMap" parameterType="java.lang.String" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Jul 14 17:17:26 CST 2014.
    -->
     select id,note , gm_code, brand
			from hx_brand_information
			where id= #{id,jdbcType=INTEGER}
  </select>
 
 <!-- 显示界面查询 -->
  <select id="getShowById" resultMap="BaseResultMap" parameterType="java.lang.String" >
     select * from hx_brand_information
			where id= #{id,jdbcType=INTEGER}
  </select>
  
 <!-- 导出查询 -->	
<select id="getBrandExport" parameterType="com.gome.gmhx.entity.Brand" resultType="hashmap">
     select t.id,t.note , t.mod_date , t.gm_code, t.brand, v1.code_value gm_code2, v2.code_value brand2 ,t.rep_date
			from hx_brand_information t
			LEFT JOIN v_code v1
			on v1.code_id='gmdm' and v1.code_key=t.gm_code
			LEFT JOIN v_code v2
			on v2.code_id='pp' and v2.code_key=t.brand
			where gm_code in('01','02','03','04','05','06','07','08','09')
	<!--  SELECT * FROM hx_brandinformation where 1=1 -->  
	     <if test="gm_code !=null">
	         and gm_code like CONCAT('%',#{gm_code},'%')
	     </if>
		<if test="brand != null">
		   and brand like CONCAT('%',#{brand},'%')
		</if>
		<if test="note != null">
		   and note like CONCAT('%',#{note},'%')
		</if>
		<if test="mod_date !=null"> 
		    and mod_date like CONCAT('%',#{mod_date},'%')
		</if>
   </select>
 
  <insert id="addBrand" parameterType="com.gome.gmhx.entity.Brand" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Jul 14 17:17:26 CST 2014.
    -->
    insert into hx_brand_information (id,gm_code, brand, note,rep_date)
    values (#{id,jdbcType=INTEGER} ,#{gm_code,jdbcType=VARCHAR}, #{brand,jdbcType=VARCHAR}, #{note,jdbcType=VARCHAR},#{rep_date,jdbcType=TIMESTAMP})
  </insert>

  
  <update id="updateBrand" parameterType="com.gome.gmhx.entity.Brand" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Jul 14 17:17:26 CST 2014.
    -->
    update hx_brand_information
    set gm_code = #{gm_code,jdbcType=VARCHAR},
        brand = #{brand,jdbcType=VARCHAR},
        note = #{note,jdbcType=VARCHAR},
        mod_date = #{mod_date,jdbcType=TIMESTAMP}
    where  id= #{id,jdbcType=INTEGER}
  </update>
 
</mapper>